<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
    <Properties>
        <Property name="log_path">logs</Property>
        <Property name="LOG_PATTERN">{"logger": "%logger", "level": "%level", "msg": "%message"}%n</Property>
    </Properties>

    <Appenders>
        <!-- 控制台 -->
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="[%d][%t][%p][%c:%L] %m%n"/>
        </Console>
<!--        <Socket name="logstash-tcp" host="18.136.102.22" port="3456" protocol="TCP">-->
<!--            <MingJsonPatternLayout pattern="${LOG_PATTERN}" projectName="entpackApi" logType="ming" />-->

<!--&lt;!&ndash;            <PatternLayout pattern="${LOG_PATTERN}"/>&ndash;&gt;-->
<!--        </Socket>-->
        <!-- 文件日志 -->
        <RollingFile name="DailyRollingFile" fileName="${log_path}/mylog.log"
                     filePattern="${log_path}/mylog.%d{yyyy-MM-dd}.log">
            <PatternLayout pattern="[%d][%t][%p][%c:%L] %m%n"/>
            <TimeBasedTriggeringPolicy interval="1"/>
            　　　　　　
            <SizeBasedTriggeringPolicy size="10 MB"/>
        </RollingFile>
        <!-- sql日志 -->
        <RollingFile name="Sql" fileName="${log_path}/sql.log"
                     filePattern="${log_path}/sql.%d{yyyy-MM-dd}.log">
            <PatternLayout pattern="[%d][%t][%p][%c:%L] %m%n"/>
            <TimeBasedTriggeringPolicy interval="1"/>
            　　　　　　
            <SizeBasedTriggeringPolicy size="10 MB"/>
        </RollingFile>
    </Appenders>
    <Loggers>
        <Logger name="druid.sql.Statement" level="debug" additivity="false">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="Sql"/>
        </Logger>
        <Logger name="druid.sql.ResultSet" level="debug" additivity="false">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="Sql"/>
        </Logger>
        <Logger name="mylog" level="trace" additivity="false">
            <AppenderRef ref="Console"/>
            　　　　　　
            <AppenderRef ref="DailyRollingFile"/>
            　　　　
        </Logger>

        <Root level="info">
            <AppenderRef ref="Console"/>
            <AppenderRef ref="DailyRollingFile"/>
            <AppenderRef ref="logstash-tcp"/>
        </Root>
    </Loggers>
</Configuration>